{
  "version": 3,
  "sources": ["../../../../../../../../devtools/projects/shell-browser/src/app/detect-angular-for-extension-icon.ts"],
  "sourcesContent": ["/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nexport interface AngularDetection {\n  // This is necessary because the runtime\n  // message listener handles messages globally\n  // including from other extensions. We don't\n  // want to set icon and/or popup based on\n  // a message coming from an unrelated extension.\n  isAngularDevTools: true;\n  isIvy: boolean;\n  isAngular: boolean;\n  isDebugMode: boolean;\n  isSupportedAngularVersion: boolean;\n}\n\nfunction detectAngular(win: Window): void {\n  const isDebugMode = Boolean((win as any).ng);\n  const ngVersionElement = document.querySelector('[ng-version]');\n  let isSupportedAngularVersion = false;\n  let isAngular = false;\n\n  if (ngVersionElement) {\n    isAngular = true;\n    const attr = ngVersionElement.getAttribute('ng-version');\n    const major = attr ? parseInt(attr.split('.')[0], 10) : -1;\n    // In case of g3 apps we support major 0.\n    if (attr && (major >= 12 || major === 0)) {\n      isSupportedAngularVersion = true;\n    }\n  }\n\n  win.postMessage(\n      {\n        isIvy: typeof (ngVersionElement as any)?.__ngContext__ !== 'undefined',\n        isAngular,\n        isDebugMode,\n        isSupportedAngularVersion,\n        isAngularDevTools: true,\n      } as AngularDetection,\n      '*');\n\n  if (!isAngular) {\n    setTimeout(() => detectAngular(win), 1000);\n  }\n}\n\ndetectAngular(window);\n"],
  "mappings": "MAqBA,SAASA,EAAcC,EAAW,CAChC,IAAMC,EAAcC,QAASF,EAAYG,EAAd,EACrBC,EAAmBC,SAASC,cAAc,cAAvB,EACrBC,EAA4B,GAC5BC,EAAY,GAEhB,GAAIJ,EAAkB,CACpBI,EAAY,GACZ,IAAMC,EAAOL,EAAiBM,aAAa,YAA9B,EACPC,EAAQF,EAAOG,SAASH,EAAKI,MAAM,GAAX,EAAgB,GAAI,EAArB,EAA2B,GAEpDJ,IAASE,GAAS,IAAMA,IAAU,KACpCJ,EAA4B,GAE/B,CAEDP,EAAIc,YACA,CACEC,MAAO,OAAQX,GAA0BY,cAAkB,IAC3DR,UAAAA,EACAP,YAAAA,EACAM,0BAAAA,EACAU,kBAAmB,EALrB,EAOA,GARJ,EAUKT,GACHU,WAAW,IAAMnB,EAAcC,CAAD,EAAO,GAA3B,CAEb,CAEDD,EAAcoB,MAAD",
  "names": ["detectAngular", "win", "isDebugMode", "Boolean", "ng", "ngVersionElement", "document", "querySelector", "isSupportedAngularVersion", "isAngular", "attr", "getAttribute", "major", "parseInt", "split", "postMessage", "isIvy", "__ngContext__", "isAngularDevTools", "setTimeout", "window"]
}
